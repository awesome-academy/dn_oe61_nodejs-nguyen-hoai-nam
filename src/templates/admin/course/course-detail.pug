include ../layouts/admin-layout

+adminLayout('Course Details', 'courses', 'Detailed view of a course', 'Course Details')
  div(class="max-w-7xl mx-auto")
    //- Back Button
    a(href="/admin/courses" class="inline-flex items-center text-indigo-600 hover:text-indigo-800 mb-6 group")
      i(class="fas fa-arrow-left mr-2 transition-transform duration-200 ease-in-out group-hover:-translate-x-1")
      span(data-i18n="courseDetail.back") Back to Courses

    //- Main Course Detail Card
    div(class="bg-white rounded-2xl shadow-xl overflow-hidden")
      //- Header with Background Image
      div(class="h-48 bg-gradient-to-r from-indigo-500 to-purple-600 p-8 relative")
        h1(id="course-name-header" class="text-4xl font-bold text-white drop-shadow-lg") Loading...
        div(class="absolute top-6 right-6")
          span(id="status-badge" class="px-3 py-1 rounded-full text-sm font-semibold bg-gray-100 text-gray-800") PENDING

      //- Course Info Body
      div(class="p-8")
        //- Description
        div(class="mb-8")
          h2(class="text-2xl font-semibold text-gray-800 mb-3 border-b-2 border-indigo-200 pb-2" data-i18n="courseDetail.description") Course Description
          p(id="course-description" class="text-gray-600 leading-relaxed") Loading description...

          .mt-4
            p.text-sm.text-gray-500.flex.items-center
              svg.w-4.h-4.mr-2(xmlns="http://www.w3.org/2000/svg", fill="none", viewBox="0 0 24 24", stroke-width="1.5", stroke="currentColor")
                path(stroke-linecap="round", stroke-linejoin="round", d="M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z")
              span Created by:
              span#course-creator.font-semibold.ml-1

        //- Key Details Grid
        div(class="grid md:grid-cols-2 gap-8")
          //- Dates
          div(class="bg-gray-50 p-6 rounded-lg")
            h3(class="text-lg font-semibold text-gray-700 mb-4") <i class="fas fa-calendar-alt mr-2 text-indigo-500"></i> #[span(data-i18n="courseDetail.timeline") Timeline]
            div(class="space-y-3")
              div(class="flex justify-between")
                span(class="font-medium text-gray-600" data-i18n="courseDetail.startDate") Start Date:
                span(id="start-date" class="font-bold text-gray-800") --/--/----
              div(class="flex justify-between")
                span(class="font-medium text-gray-600" data-i18n="courseDetail.endDate") End Date:
                span(id="end-date" class="font-bold text-gray-800") --/--/----

          //- Actions
          div(class="bg-gray-50 p-6 rounded-lg")
            h3(class="text-lg font-semibold text-gray-700 mb-4") <i class="fas fa-cogs mr-2 text-indigo-500"></i> #[span(data-i18n="courseDetail.actions") Actions]
            div(class="flex space-x-4")
              button(id="update-course-btn" class="flex-1 inline-flex items-center justify-center px-3 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors")
                i(class="fas fa-edit mr-2")
                span(data-i18n="common.update") Update

              button(id="start-course-btn" class="flex-1 inline-flex items-center justify-center px-3 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors hidden")
                i(class="fas fa-play mr-2")
                span(data-i18n="common.start") Start
              button(id="finish-course-btn" class="flex-1 inline-flex items-center justify-center px-3 py-2 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors hidden")
                i(class="fas fa-flag-checkered mr-2")
                span(data-i18n="common.finish") Finish
              button(id="delete-course-btn" class="flex-1 inline-flex items-center justify-center px-3 py-2 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors")
                i(class="fas fa-trash-alt mr-2")
                span(data-i18n="common.deleteCourse") Delete Course

    //- Assigned Supervisors Section
    div(class="mt-8 bg-white rounded-2xl shadow-xl overflow-hidden")
      div(class="p-8")
        div(class="flex items-center justify-between mb-4")
          h2(class="text-2xl font-semibold text-gray-800" data-i18n="courseDetail.assignedSup") Assigned Supervisors
          button(id="assign-supervisor-btn" class="inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm")
            i(class="fas fa-user-plus mr-2")
            span(data-i18n="courseDetail.assignSupervisor") Assign Supervisor
        div(class="overflow-x-auto")
          table(class="min-w-full divide-y divide-gray-200")
            thead(class="bg-gray-50")
              tr
                th(scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" data-i18n="common.name") Name
                th(scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" data-i18n="common.email") Email
                th(scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" data-i18n="common.status") Status
                th(scope="col" class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider" data-i18n="common.actions") Actions
            tbody(id="supervisor-list-body" class="bg-white divide-y divide-gray-200")
              //- Loading State
              tr(id="supervisor-loading-state")
                td(colspan="4" class="px-6 py-4 text-center text-gray-500")
                  i(class="fas fa-spinner fa-spin mr-2")
                  | | #[span(data-i18n="common.loadingSup") Loading supervisors...]

    //- Enrolled Trainees Section
    div(class="mt-8 bg-white rounded-2xl shadow-xl overflow-hidden")
      div(class="p-8")
        div(class="flex items-center justify-between mb-4")
          h2(class="text-2xl font-semibold text-gray-800" data-i18n="courseDetail.enrolledTrainee") Enrolled Trainees
          button(id="assign-trainee-btn" class="inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors text-sm")
            i(class="fas fa-user-plus mr-2")
            span(data-i18n="courseDetail.assignTrainee") Assign Trainee
        div(class="overflow-x-auto")
          table(class="min-w-full divide-y divide-gray-200")
            thead(class="bg-gray-50")
              tr
                th(scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" data-i18n="courseDetail.traineeName") Trainee Name
                th(scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" data-i18n="courseDetail.regDate") Registration Date
                th(scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" data-i18n="courseDetail.progress") Progress
                th(scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" data-i18n="common.status") Status
                th(scope="col" class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider")
                  i(class="fas fa-eye" title="Progress")
                th(scope="col" class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider" data-i18n="common.actions") Actions
            tbody(id="trainee-list-body" class="bg-white divide-y divide-gray-200")
              //- Loading State
              tr(id="trainee-loading-state")
                td(colspan="5" class="px-6 py-4 text-center text-gray-500")
                  i(class="fas fa-spinner fa-spin mr-2")
                  | | #[span(data-i18n="common.loadingTrainee") Loading trainees...]

    //- Subjects Section
    div(class="mt-8 bg-white rounded-2xl shadow-xl overflow-hidden")
      div(class="p-8")
        h2(class="text-2xl font-semibold text-gray-800 mb-4" data-i18n="courseDetail.subjects") Subjects
        div(class="overflow-x-auto")
          table(class="min-w-full divide-y divide-gray-200")
            thead(class="bg-gray-50")
              tr
                th(scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" data-i18n="courseDetail.subjectName") Subject Name
                th(scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" data-i18n="common.description") Description
                th(scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" data-i18n="courseDetail.duration") Study Duration (hours)
                th(scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" data-i18n="common.status") Status
            tbody(id="subject-list-body" class="bg-white divide-y divide-gray-200")
              //- Loading State
              tr(id="subject-loading-state")
                td(colspan="4" class="px-6 py-4 text-center text-gray-500")
                  i(class="fas fa-spinner fa-spin mr-2")
                  | | #[span(data-i18n="common.loadingSubjects") Loading subjects...]

block scripts
  script(src="/js/course-detail.js")
  script(src="/js/assign-supervisor.js")
  script(src="/js/assign-trainee.js")
