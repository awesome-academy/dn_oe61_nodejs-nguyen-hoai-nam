include ../layouts/admin-layout

+adminLayout('Trainee Subject Progress', 'trainees', 'Detailed view of a trainee\'s subject progress', 'Subject Progress')
  div(class="max-w-7xl mx-auto")
    //- Breadcrumbs
    nav(class="flex mb-6" aria-label="Breadcrumb")
      ol(class="inline-flex items-center space-x-1 md:space-x-3")
        li(class="inline-flex items-center")
          a(href="/admin/trainees" class="inline-flex items-center text-sm font-medium text-gray-700 hover:text-indigo-600")
            i(class="fas fa-users w-4 h-4 mr-2")
            | Trainees
        li
          div(class="flex items-center")
            i(class="fas fa-chevron-right w-3 h-3 text-gray-400")
            a(id="breadcrumb-trainee-name" href="#" class="ml-1 text-sm font-medium text-gray-700 hover:text-indigo-600 md:ml-2") Loading...
        li(aria-current="page")
          div(class="flex items-center")
            i(class="fas fa-chevron-right w-3 h-3 text-gray-400")
            span(id="breadcrumb-subject-name" class="ml-1 text-sm font-medium text-gray-500 md:ml-2") Subject Progress

    //- Main Content Card
    div(class="bg-white rounded-2xl shadow-xl overflow-hidden")
      //- Header
      div(class="bg-gradient-to-r from-indigo-600 to-purple-600 p-8 relative")
        h1(id="subject-name-header" class="text-4xl font-bold text-white drop-shadow-lg") Loading Subject...
        p(id="trainee-name-subheader" class="text-indigo-200 text-lg mt-1") For Trainee: Loading...

      //- Body
      div(class="p-8")
        //- Action Button Section
        div(id="action-button-container" class="mb-8 text-right")
          //- Button will be injected here by JS

        //- Key Details Grid
        div(class="grid md:grid-cols-3 gap-8 mb-8")
          //- Status
          div(class="bg-gray-50 p-6 rounded-lg text-center")
            h3(class="text-lg font-semibold text-gray-700 mb-2") 
              i(class="fas fa-check-circle mr-2 text-indigo-500")
              | Status
            p(id="subject-status" class="text-2xl font-bold text-gray-800") --

          //- Progress
          div(class="bg-gray-50 p-6 rounded-lg text-center")
            h3(class="text-lg font-semibold text-gray-700 mb-2") 
              i(class="fas fa-tasks mr-2 text-indigo-500")
              | Progress
            p(id="subject-progress" class="text-2xl font-bold text-gray-800") --%

          //- Dates
          div(class="bg-gray-50 p-6 rounded-lg text-center")
            h3(class="text-lg font-semibold text-gray-700 mb-2") 
              i(class="fas fa-calendar-alt mr-2 text-indigo-500")
              | Timeline
            div(class="text-sm text-gray-600")
              span Started: 
              strong(id="started-at-date") Not Started
            div(class="text-sm text-gray-600 mt-1")
              span Finished: 
              strong(id="finished-at-date") --

        //- Tasks List
        div
          h2(class="text-2xl font-semibold text-gray-800 mb-4 border-b-2 border-indigo-200 pb-2") Tasks List
          div(class="overflow-x-auto")
            table(class="min-w-full divide-y divide-gray-200")
              thead(class="bg-gray-50")
                tr
                  th(scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider") Task Name
                  th(scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider") Status
                  th(scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider") Actions
              tbody(id="task-list-body" class="bg-white divide-y divide-gray-200")
                //- Loading State
                tr(id="task-loading-state")
                  td(colspan="3" class="px-6 py-4 text-center text-gray-500")
                    i(class="fas fa-spinner fa-spin mr-2")
                    | Loading tasks...

block scripts
  script(src="/js/trainee-subject-progress.js")
